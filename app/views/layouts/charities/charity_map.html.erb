<%= content_for :stylesheet do %>
  <%= stylesheet_link_tag 'info', media: 'all', 'data-turbolinks-track': 'reload'  %>
<% end %>
<script src="//maps.google.com/maps/api/js?key=AIzaSyChu5TaHmlYjg1um6R9zwMqfJQT_EFAwrU"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>
	<style type="text/css">body {height: 100%; overflow: auto;}</style>	
		<div style='width: 800px;'>
		  <div id="map" style='width: 800px; height: 600px; margin-top: 80px; margin-left: 100px;'></div>
		</div>
		<% if current_user.superadmin_role == true %>
		<div id="add-location">
			<%= form_for :location, url: locations_path do |f| %>
			<%= f.label :address %><br>
			<%= f.text_field :address %>

			<%= f.submit "Submit" %>
			<% end %>
		</div>
		<% end %>

<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({ provider: { zoom: 10}, internal: {id: 'map'}}, 
  function(){
  	 markers = handler.addMarkers(<%=raw @hash.to_json %>);
  // markers = handler.addMarkers([
  //   {
  //     "lat": 12.998896,
  //     "lng": 77.600839,
  //     "infowindow": "Apartment!"
  //   },
  //   {
  //     "lat": 13.060132,
  //     "lng": 77.670167,
  //     "infowindow": {
  //     	"picture":{
  //     		"url": "http://acceptindia.org/wp-content/uploads/2013/03/Acceptlogo.png",
  //       	"width":  32,
  //       	"height": 32
  //     	}
  //     }
  //   }
  

  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  
});</script>